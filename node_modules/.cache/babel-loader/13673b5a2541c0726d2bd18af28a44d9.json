{"ast":null,"code":"import axios from \"../api/axios\"; // import { mondayInstance } from \"../api/monday\";\n\nexport const getCurrentItemID = async mondayInstance => {\n  try {\n    debugger;\n    const contextResponse = await mondayInstance.get(\"context\");\n    const {\n      itemId\n    } = contextResponse.data;\n    console.log(itemId);\n    return itemId;\n  } catch (error) {}\n};\nexport const getVoiceMessagesHistory = async (mondayInstance, itemId) => {\n  debugger;\n  const query = ` query {items( ids : ${itemId}) {\n        updates {\n          id\n          body\n          creator_id\n          assets {\n            id\n            public_url\n          }\n        }\n      }}`;\n  const updatesResponse = await mondayInstance.api(query);\n  const processedUpdates = getProcessedUpdates(updatesResponse);\n  console.log(processedUpdates); //process response...\n};\n\nconst getProcessedUpdates = updatesResponse => {\n  if (updatesResponse.data.items[0].updates.length > 0) {\n    //has updates\n    const filteredUpdates = updatesResponse.data.items[0].updates.filter(({\n      assets\n    }) => assets);\n    const result = filteredUpdates.map(update => {\n      const {\n        assets,\n        creator_id\n      } = update;\n      const voiceMemos = getVoiceMemos(assets);\n      return voiceMemos;\n    });\n  }\n};\n\nconst getVoiceMemos = assets => {\n  return assets.filter(asset => filterAssets(asset));\n};\n\nexport const _blobToFile = (theBlob, fileName) => {\n  theBlob.lastModifiedDate = new Date();\n  theBlob.name = fileName;\n  const processedBlob = theBlob.slice(0, theBlob.size, \"video/mp4\");\n  debugger;\n  const newFile = new File([theBlob], fileName, {\n    type: processedBlob.type\n  });\n  return newFile;\n};\nexport const _createUpdate = async (mondayInstance, itemId) => {\n  const query = `mutation {\n        create_update (item_id: ${itemId}, body: \"This update is for a new video\") {\n        id\n        }\n        }`;\n  const response = await mondayInstance.api(query);\n  const {\n    id\n  } = response.data.create_update;\n  return id;\n};\nexport const _addFileToUpdate = async (newUpdateId, file) => {\n  const formData = new FormData();\n  formData.append(\"variables[file]\", file, \"filename.mp4\");\n  const noVariableQuery = `mutation addFile($file: File!) {add_file_to_update (update_id: ${newUpdateId}, file: $file) {id}}`;\n  formData.append(\"query\", noVariableQuery);\n\n  try {\n    const res = await axios.post(process.env.REACT_APP_BASE_URL, formData);\n  } catch (error) {//internal 500 server error\n  }\n};\nexport const _createColumn = async (mondayInstance, boardId, columnName) => {\n  const query = `mutation {\n        create_column (board_id: ${boardId}, title: ${columnName}, column_type: file) {\n        id\n        }\n        }`;\n  const response = await mondayInstance.api(query);\n  const {\n    id\n  } = response.data.create_column;\n  return id;\n};\nexport const _addFileToColumn = async (itemId, newColumnId, file) => {\n  const formData = new FormData();\n  formData.append(\"variables[file]\", file, \"filename.mp4\");\n  const noVariableQuery = `mutation addFile($file: File!) {  add_file_to_column (item_id: ${itemId}, column_id: ${newColumnId},file: $file) {id}}`;\n  formData.append(\"query\", noVariableQuery);\n\n  try {\n    const res = await axios.post(process.env.REACT_APP_BASE_URL, formData);\n  } catch (error) {//internal 500 server error\n  }\n};","map":{"version":3,"sources":["/Users/skills/team-task-item-view/quickstart-react/src/utils/helper.js"],"names":["axios","getCurrentItemID","mondayInstance","contextResponse","get","itemId","data","console","log","error","getVoiceMessagesHistory","query","updatesResponse","api","processedUpdates","getProcessedUpdates","items","updates","length","filteredUpdates","filter","assets","result","map","update","creator_id","voiceMemos","getVoiceMemos","asset","filterAssets","_blobToFile","theBlob","fileName","lastModifiedDate","Date","name","processedBlob","slice","size","newFile","File","type","_createUpdate","response","id","create_update","_addFileToUpdate","newUpdateId","file","formData","FormData","append","noVariableQuery","res","post","process","env","REACT_APP_BASE_URL","_createColumn","boardId","columnName","create_column","_addFileToColumn","newColumnId"],"mappings":"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","sourcesContent":["import axios from \"../api/axios\";\n// import { mondayInstance } from \"../api/monday\";\n\nexport const getCurrentItemID = async (mondayInstance) => {\n  try {\n    debugger;\n    const contextResponse = await mondayInstance.get(\"context\");\n    const { itemId } = contextResponse.data;\n    console.log(itemId);\n    return itemId;\n  } catch (error) {}\n};\n\nexport const getVoiceMessagesHistory = async (mondayInstance, itemId) => {\n  debugger;\n  const query = ` query {items( ids : ${itemId}) {\n        updates {\n          id\n          body\n          creator_id\n          assets {\n            id\n            public_url\n          }\n        }\n      }}`;\n\n  const updatesResponse = await mondayInstance.api(query);\n  const processedUpdates = getProcessedUpdates(updatesResponse);\n  console.log(processedUpdates);\n  //process response...\n};\n\nconst getProcessedUpdates = (updatesResponse) => {\n  if (updatesResponse.data.items[0].updates.length > 0) {\n    //has updates\n    const filteredUpdates = updatesResponse.data.items[0].updates.filter(\n      ({ assets }) => assets\n    );\n\n    const result = filteredUpdates.map((update) => {\n      const { assets, creator_id } = update;\n      const voiceMemos = getVoiceMemos(assets);\n      return voiceMemos;\n    });\n  }\n};\n\nconst getVoiceMemos = (assets) => {\n  return assets.filter((asset) => filterAssets(asset));\n};\n\nexport const _blobToFile = (theBlob, fileName) => {\n  theBlob.lastModifiedDate = new Date();\n  theBlob.name = fileName;\n  const processedBlob = theBlob.slice(0, theBlob.size, \"video/mp4\");\n  debugger;\n  const newFile = new File([theBlob], fileName, {\n    type: processedBlob.type,\n  });\n\n  return newFile;\n};\n\nexport const _createUpdate = async (mondayInstance, itemId) => {\n  const query = `mutation {\n        create_update (item_id: ${itemId}, body: \"This update is for a new video\") {\n        id\n        }\n        }`;\n  const response = await mondayInstance.api(query);\n\n  const { id } = response.data.create_update;\n  return id;\n};\n\nexport const _addFileToUpdate = async (newUpdateId, file) => {\n  const formData = new FormData();\n  formData.append(\"variables[file]\", file, \"filename.mp4\");\n\n  const noVariableQuery = `mutation addFile($file: File!) {add_file_to_update (update_id: ${newUpdateId}, file: $file) {id}}`;\n  formData.append(\"query\", noVariableQuery);\n\n  try {\n    const res = await axios.post(process.env.REACT_APP_BASE_URL, formData);\n  } catch (error) {\n    //internal 500 server error\n  }\n};\n\nexport const _createColumn = async (mondayInstance, boardId, columnName) => {\n  const query = `mutation {\n        create_column (board_id: ${boardId}, title: ${columnName}, column_type: file) {\n        id\n        }\n        }`;\n  const response = await mondayInstance.api(query);\n  const { id } = response.data.create_column;\n  return id;\n};\n\nexport const _addFileToColumn = async (itemId, newColumnId, file) => {\n  const formData = new FormData();\n  formData.append(\"variables[file]\", file, \"filename.mp4\");\n\n  const noVariableQuery = `mutation addFile($file: File!) {  add_file_to_column (item_id: ${itemId}, column_id: ${newColumnId},file: $file) {id}}`;\n  formData.append(\"query\", noVariableQuery);\n\n  try {\n    const res = await axios.post(process.env.REACT_APP_BASE_URL, formData);\n  } catch (error) {\n    //internal 500 server error\n  }\n};\n"]},"metadata":{},"sourceType":"module"}